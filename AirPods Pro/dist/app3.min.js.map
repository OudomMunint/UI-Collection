{"version":3,"sources":["app3.js"],"names":["html","document","documentElement","canvas","getElementById","context","getContext","text2","querySelector","frameCount","index","concat","toString","padStart","preloadImages","i","Image","controller3","ScrollMagic","Controller","img","currentFrame","Scene","duration","triggerElement","intro3","triggerHook","setPin","TweenMax","fromTo","opacity","textAnim","scene3","setTween","addTo","width","height","src","drawImage","scrollFraction","scrollTop","scrollHeight","window","innerHeight","addEventListener","min","Math","maxScrollTop","requestAnimationFrame","updateImage","frameIndex"],"mappings":"aAAA,IAAMA,KAAOC,SAASC,gBAChBC,OAASF,SAASG,eAAe,kBADjCJ,QAAOC,OAASC,WAAAA,MAChBC,OAASF,SAASG,cAAe,WACjCC,MAAUF,OAAOG,cAAW,MAE5BC,WAAeC,IAEfC,aAAN,SAAAC,GAAA,MAAA,kIAAAC,OAEoID,EAAME,WAAWC,SAAS,EAAG,KAFjK,SAC0BC,cAAA,WAA1B,IAAA,IAAAC,EAAA,EAAAA,EAAAN,WAAAM,IAAA,EAKgB,IAAIC,OAFdF,IAAAA,aAAgBC,KAMhBE,YAAc,IAAIC,YAAYC,WAHhCC,OAAUC,IAAAA,YAAVC,MAAA,CACDC,SAAA,IAJHC,eAAAC,OAUEC,YAAa,IAHfC,OAAYF,QACVF,MAAAA,aAEAG,SAAaE,SAAAC,OAAAtB,MAAA,EAAA,CAAAuB,QAAA,GAAA,CAAAA,QAAA,IAKTC,OAAWH,IAAAA,YAAgBrB,MAAhB,CAA4BuB,SAAS,IAAKN,eAAAC,OAAEK,YAAS,IAEhEE,SAASD,UACXR,MAAQN,aAERS,IAAAA,IAAaV,MAHoBI,IAKhCa,IAAAA,aACAC,GAEL/B,OAASgC,MAAG,KACZf,OAAAgB,OAAUf,IACVlB,IAAAA,OAAOgC,WACPhC,QAAOiC,UAAPhB,IAAA,EAAA,IAEEf,IAAAA,YAAkBe,SAAAA,GADpBA,IAAAiB,IAAAhB,aAAAX,GAMEL,QAAQiC,UAAUlB,IAAK,EAAG,IAD1BA,OAAIiB,iBAAkB,SAAtB,WACAhC,IAKMkC,EALYnB,KAAKoB,WAFzBxC,KAAAyC,aAAAC,OAAAC,aAIOC,EAAAA,KAAiBC,IACtBpC,WAAe,EACfqC,KAAMC,KAAAA,EAAoBN,aAO1BO,sBAAsB,WAAA,OAAAC,YAAAC,EAAA,OACvBpC","file":"app3.min.js","sourcesContent":["const html = document.documentElement;\r\nconst canvas = document.getElementById(\"hero-lightpass\");\r\nconst context = canvas.getContext(\"2d\");\r\nconst intro3 = document.querySelector(\".intro3\");\r\nconst text2 = intro3.querySelector(\"h1\");\r\n\r\nconst frameCount = 148;\r\nconst currentFrame = index => (\r\n  `https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/${index.toString().padStart(4, '0')}.jpg`\r\n)\r\nconst preloadImages = () => {\r\n  for (let i = 1; i < frameCount; i++) {\r\n    const img = new Image();\r\n    img.src = currentFrame(i);\r\n  }\r\n};\r\nconst controller3 = new ScrollMagic.Controller();\r\nconst scene5 = new ScrollMagic.Scene({\r\n  duration: 3000,\r\n  triggerElement: intro3,\r\n  triggerHook: 0,\r\n})\r\n  .setPin(intro3,)\r\n  .addTo(controller3);\r\n\r\nconst textAnim = TweenMax.fromTo(text2, 1, { opacity: 1 }, { opacity: 0 });\r\n\r\nconst scene3 = new ScrollMagic.Scene({\r\n    duration: 2000,\r\n    triggerElement: intro3,\r\n    triggerHook: 0,\r\n  })\r\n    .setTween(textAnim)\r\n    .addTo(controller3);\r\n\r\nconst img = new Image()\r\nimg.src = currentFrame(1);\r\ncanvas.width=1158;\r\ncanvas.height=770;\r\nimg.onload=function(){\r\n  context.drawImage(img, 0, 0);\r\n}\r\n\r\nconst updateImage = index => {\r\n  img.src = currentFrame(index);\r\n  context.drawImage(img, 0, 0);\r\n}\r\nwindow.addEventListener('scroll', () => {  \r\n  const scrollTop = html.scrollTop;\r\n  const maxScrollTop = html.scrollHeight - window.innerHeight;\r\n  const scrollFraction = scrollTop / maxScrollTop;\r\n  const frameIndex = Math.min(\r\n    frameCount - 1,\r\n    Math.ceil(scrollFraction * frameCount)\r\n  );\r\n  \r\n  requestAnimationFrame(() => updateImage(frameIndex + 1))\r\n});\r\n\r\npreloadImages()"]}