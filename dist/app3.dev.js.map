{"version":3,"sources":["app3.js"],"names":["html","document","documentElement","canvas","getElementById","context","getContext","intro3","querySelector","text2","frameCount","currentFrame","index","toString","padStart","preloadImages","i","img","Image","src","controller3","ScrollMagic","Controller","scene5","Scene","duration","triggerElement","triggerHook","setPin","addTo","textAnim","TweenMax","fromTo","opacity","scene3","setTween","width","height","onload","drawImage","updateImage","window","addEventListener","scrollTop","maxScrollTop","scrollHeight","innerHeight","scrollFraction","frameIndex","Math","min","ceil","requestAnimationFrame"],"mappings":"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","sourcesContent":["const html = document.documentElement;\r\nconst canvas = document.getElementById(\"hero-lightpass\");\r\nconst context = canvas.getContext(\"2d\");\r\nconst intro3 = document.querySelector(\".intro3\");\r\nconst text2 = intro3.querySelector(\"h1\");\r\n\r\nconst frameCount = 148;\r\nconst currentFrame = index => (\r\n  `https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/${index.toString().padStart(4, '0')}.jpg`\r\n)\r\nconst preloadImages = () => {\r\n  for (let i = 1; i < frameCount; i++) {\r\n    const img = new Image();\r\n    img.src = currentFrame(i);\r\n  }\r\n};\r\nconst controller3 = new ScrollMagic.Controller();\r\nconst scene5 = new ScrollMagic.Scene({\r\n  duration: 3000,\r\n  triggerElement: intro3,\r\n  triggerHook: 0,\r\n})\r\n  .setPin(intro3,)\r\n  .addTo(controller3);\r\n\r\nconst textAnim = TweenMax.fromTo(text2, 1, { opacity: 1 }, { opacity: 0 });\r\n\r\nconst scene3 = new ScrollMagic.Scene({\r\n    duration: 2000,\r\n    triggerElement: intro3,\r\n    triggerHook: 0,\r\n  })\r\n    .setTween(textAnim)\r\n    .addTo(controller3);\r\n\r\nconst img = new Image()\r\nimg.src = currentFrame(1);\r\ncanvas.width=1158;\r\ncanvas.height=770;\r\nimg.onload=function(){\r\n  context.drawImage(img, 0, 0);\r\n}\r\n\r\nconst updateImage = index => {\r\n  img.src = currentFrame(index);\r\n  context.drawImage(img, 0, 0);\r\n}\r\nwindow.addEventListener('scroll', () => {  \r\n  const scrollTop = html.scrollTop;\r\n  const maxScrollTop = html.scrollHeight - window.innerHeight;\r\n  const scrollFraction = scrollTop / maxScrollTop;\r\n  const frameIndex = Math.min(\r\n    frameCount - 1,\r\n    Math.ceil(scrollFraction * frameCount)\r\n  );\r\n  \r\n  requestAnimationFrame(() => updateImage(frameIndex + 1))\r\n});\r\n\r\npreloadImages()"],"file":"app3.dev.js"}